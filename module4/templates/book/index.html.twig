{% extends 'base.html.twig' %}

{% block title %}Books{% endblock %}

{% block body %}
	<h1>Books</h1>
	<div>
		Sort by:
		<a class="btn btn-primary" href="{{ path('book.sort', {'id': 'price'}) }}">Price</a>
		<a class="btn btn-primary" href="{{ path('book.sort', {'id': 'title'}) }}">Book name</a>
		<a class="btn btn-primary" href="{{ path('book.sort', {'id': 'author'}) }}">Author</a>
	</div>
	<br/>
	<form action="{{ path('book_search', {'id': 'price'}) }}" method="get">
		<div class="form-group">
			<label for="search">Search by price:</label>
			<input class="form-control" type="text" aria-label="Search"
				   name="q"
				   id="search" required>
		</div>
		<button class="btn btn-info" type="submit">Search</button>
	</form>

	<table class="table" style="margin-top: 25px">
		<thead>
		<tr>
			<th>Id</th>
			<th>Title</th>
			<th>Author</th>
			<th>Description</th>
			<th>Price</th>
			<th>Url</th>
			<th>actions</th>
		</tr>
		</thead>
		<tbody>
		{% for book in books %}
			<tr>
				<td>{{ book.id }}</td>
				<td>{{ book.title }}</td>
				<td>{{ book.author }}</td>
				<td>{{ book.description }}</td>
				<td>{{ book.price }}</td>
				<td>{{ book.url }}</td>
				<td>
					<a href="{{ path('book_show', {'id': book.id}) }}">show</a>
					<a href="{{ path('book_edit', {'id': book.id}) }}">edit</a>
				</td>
			</tr>
		{% else %}
			<tr>
				<td colspan="7">no records found</td>
			</tr>
		{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('book_new') }}">Create new</a>
{% endblock %}
